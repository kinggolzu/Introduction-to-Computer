# Github与Gitbook课堂实验

---
### 实验一：
#### 实验任务：完成Github与Gitbook的连接，熟悉合作编撰模式，并会设置书籍权限，以及合并分支等操作。
#### 实验具体参考步骤：

1.首先，你需要登陆[http://github.com/](http://github.com/)， 注册一个Github账号,点击sign up按照提示一步步注册即可。

![](/assets/p140.png)

2.有了Github账号后你可以不用再去单独注册Gitbook了。登陆[https://www.gitbook.com/](https://www.gitbook.com/)， 点击右上角sign in。

![](/assets/p141.png)

选择sign in with Github

![](/assets/p142.png) 
3.我们进入Gitbook中，创建一本书，书的名字为test_book，Description里面写这本书的描述，填好后点击右下角的Create Book按钮 

![](/assets/p143.png) 

4.这样一本书就创建好了，下面我们要连接Github来实现协同合作的功能。先进入这本书中，选中settings，然后复制下图中的Gitbook中的地址，这个地址用于将这本书的URL传给Github中的某个仓库中。

![](/assets/p144.png) 
 
5.进入网址https://github.com/new/import中,将刚才复制的地址复制到URL中，并创建一个Github仓库，这样Github就可以通过这个地址与Gitbook进行同步。 

![](/assets/p145.png) 

6.点击上图的Begin import后，要输入你的github的账号和密码。

![](/assets/p146.png) 

7.导入成功后，gitbook这本书的地址就给了github中对应的仓库了。

![](/assets/p147.png) 

8.完成Gitbook的导入后，只是将Gitbook中的地址给了Github，还需将Github的仓库地址给Gitbook，此时我们就需要回到Gitbook中，添加一下Github对应的仓库，即我们第5步创建的test_repository仓库，这样才完成了Gitbook与Github之间的双向通信。

![](/assets/p148.png) 

9.(此步非必需)这样就完成了gitbook与github的关联，但是大家有没有想过，光用gitbook写书就可以了，为什么要把它和github关联起来呢？这是因为首先github中可以进行协同合作，比如一本书需要由多个人同时编写，小辉要写这本书，小强也在同时编辑这本书，这时候在github上就能清楚的看到是谁在什么时间编辑了这本书，进行了哪些修改，其次，就是github可以设置权限，比如小辉是这本书的创建者，他想邀请小强一起编辑这本书，这时就可以给小强赋予权限，这样小强也能编辑这本书了，具体如图：<br>
每个仓库都可以选择合作人：

![](/assets/p149.png) 

10.建立了github与gitbook的联系以后，我们就可以安静的写书了，首先我们需要下载Gitbook客户端，在客户端中用markdown编辑既方便又快捷，我们首先需要将我们在云端的test_book这本书下载到本地，编辑后再将test_book上传到云端，下载如下图所示：

![](/assets/p150.png) 

11.进入这本书以后，就可以编辑了： 

![](/assets/p151.png) 

12.写完后同步到云端：

![](/assets/p152.png) 
 
13.同步后，就可以登陆gitbook和github上，发现仓库中的内容发生了变化，所以我们以后就可以在Gitbook客户端上编写，然后上传到云端以网页的形式显示出来。<br> 

![](/assets/p153.png) 

**现在已经将GitBook上书的仓库和GitHub上书的仓库关联起来了，以后既可以通过GitBook写书，也可以将更新提交到GitHub，极大的方便了多人协作撰写一本课本。**

---

### 实验二：和他人的仓库进行合并，fork和pull request
#### 实验任务：拷贝老师在github上留的作业，进行修改找错，然后提出合并请求。
#### 实验具体参考步骤：
我们知道github是开源的，因此你创建的一本书（一个仓库），网络上的任何人都是可以看到的，我们如果发现别人的代码有问题，或者想帮助别人一起出书，可以将别人的代码fork（拷贝到自己的github中）下来，改好后，给作者发送一个合并请求，如果作者发现你做的确实是对的，就可以合并你的内容，实现协同合作功能。<br>
我们举一个老师让学生编写书籍的例子：

![](/assets/图片2.png)

我们还以test_book这本书为例，这本书的创建过程我们已经在上一节中说过了，下面我们以weixh121001这个github账号来做学生：<br>
（1）fork刚才我们创建的test_repository仓库。<br>
（2）下载个Gitbook客户端编书<br>
（3）发出pull request申请<br>
1.进入老师给的test_repository仓库地址，然后fork，fork就是把一个别人的仓库复制到自己的账户中来。http://github.com/yinhang2/test_repository

![](/assets/图片3.png)


2.下载并安装GitHub客户端：https://desktop.github.com<br>
3.打开GitHub客户端，首次打开需登录并初始化，步骤如下

![](/assets/图片4.png)

 
接下来的“Configure”和“Repositories”步骤全部 选择“Skip”<br>
4.登陆成功后点击左上角的“+”，后选择“clone”，然后选中test_repository仓库，然后点击下面的“Clone test_repository”

![](/assets/图片5.png)


5.接下来在弹出的对话框中选择仓库在电脑上保存的位置，请务必记住这个位置，然后确定，接下来等正在clone的页面消失即可关闭GitHub客户端。 

![](/assets/图片6.png)


6.进入自己的Gitbook客户端，点击左上角的“Import”，在弹出的对话框中选择刚才用GitHub客户端clone的test_repository文件夹并打开 

![](/assets/图片7.png)


7.此时test仓库便会出现在GitBook首页中，点击它并可以打开它完成相应作业<br>
8.作业完成后先点击左上角“Save”，然后再点击Save右边出现的☁️按钮

![](/assets/图片8.png)


9.在接下来弹出的对话框中输入GitHub的用户名和密码，后点击“Sync”，此时便将你的作业同步到你账户中的test_repository仓库了，接下来还要从你的仓库中发送pull request<br>
10.打开GitHub，进入学生的test_repository仓库，然后点击“Pull requests”

![](/assets/图片9.png)

 
11.点击右边的“New pull request”<br>
12.点击“Create pull request

![](/assets/图片10.png)


13.在展开的页面中“Title”处填写作业完成的大概情况，在“Leave a comment”处填写详细，后点击下方的“Create pull request”，至此作业提交完成。

![](/assets/图片11.png)


这时老师在Github上就会得到pull request信息，点击pull request，点进test仓库

![](/assets/图片12.png)


这时老师看了下信息，如果可以合并，就点击绿色按钮 Merge pull request，也可以回复Comment 

![](/assets/图片13.png)

其实fork一个仓库不仅可以帮助老师完成书籍，还可以：<br>
● fork任意人的代码（Github的开源性），发表自己的观点<br>
● fork别人的代码发现错误，汇报给作者，互相学习借鉴<br>
● 通过fork来完成老师布置的课后作业

---

### 实验三：
#### 实验任务：学会评论和设置权限
#### 实验具体参考步骤：
1.进入GitBook仓库<br>
2.点击“DISCUSSIONS”

![](/assets/图片14.png)

3.点击“+ New Discussion”

![](/assets/图片15.png)


4.在Title和Leave a comment处分别写下问题概述和详细

![](/assets/图片16.png)


5.完成后点击“Post Discussion”，之后会有负责答疑的助教解答该问题<br>
注意：提问之前请先查看是否有人已经提出相关问题<br>
6.Github权限设置：选中某个仓库的Settings，选择collaborators，添加即可，这里添加的是管理员

![](/assets/图片17.png)
7.还有比较复杂的项目，选择Collaborators&teams下面可以赋值权限

![](/assets/图片18.png)

---

### 实验四：
#### 实验任务：学会控制版本，完成版本的回滚及冲突合并
#### 实验具体参考步骤：
1.我们在test_repository这个仓库中添加第二章Second Chapter，添加内容并上传

![](/assets/p161.png)

2.在Github客户端可以看到修改

![](/assets/p162.png)

3.如果我们想将这个修改撤销，就相当于回到之前的版本

![](/assets/p163.png)

4.这时会有删除的信息

![](/assets/p164.png)

5.当两个人同时修改一个文件里的内容时就可能会产生冲突。

![](/assets/p165.png)

6.另一个人weixh121001同时也创建了这个文件并修改

![](/assets/p166.png)

7.另一个人weixh121001同时也创建了这个文件并修改

![](/assets/p167.png)

8.修改完成后保存、提交并同步

![](/assets/p168.png)

9.同步后会显示分支合并，内容修改

![](/assets/p169.png)

10.如果想从pr/1分支提交到master主分支，需要pull request

![](/assets/p170.png)

11.登陆Github进行确认请求

![](/assets/p171.png)

12.通过后，主分支的内容也改变了，我们可以分别切换到两个分支看状态

![](/assets/p172.png)

#### 注：我们的《基于机器人的实践方法》这门课程就是按照这样的步骤完成的，由于课程内容涉及到各个方面，每个同学都有自己擅长的部分，这样分工合作的模式不仅提高了书籍编撰的效率，也提高了书本内容的质量。
<p style="text-align: right;">联系方式：周庆国,<img src="/assets/biaozhi.png" style="width: 15px;height: 15px;">zhouqg@lzu.edu.cn<p>

